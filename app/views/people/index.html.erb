<p id="notice"><%= notice %></p>

<%# capitalize method %>
<%=
def capitalize (input)
  input = input.split
  input.each_with_index do |ele, i|
    input[i] = ele.capitalize
    #capitalize letter after backslash
    input[i] = input[i].gsub(/\/[a-z]/) {|s| s.upcase }
    #capitalize names after '
    input[i] = input[i].gsub(/'[a-z]/) {|s| s.upcase }
  end
  return input.join(' ')
end

puts 'input'
%>

<%# <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/floatthead/2.2.1/jquery.floatThead.min.js" integrity="sha512-q0XkdCnK0e3QLJgYrtENEEmAv+urSGCQs/xCXF4xs+NoLfNWD+j7iMqNYXtFOQfnYDsfE4Z7phZqaHgYJrGB/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://unpkg.com/floatthead"></script>
<script>
  $(() => $('table').floatThead());
</script> %>


<div
class='table-responsive'
>
<h4>People</h4>
<table class='table table-striped table-bordered table-hover'>
  <thead class='table-light' style='position: sticky;
  top: 0;' >
    <tr>
      <th>ID</th>
      <th>First Name</th>
      <th style="min-width: 120px">Middle Name</th>
      <th>Last Name</th>
      <th>Prefix</th>
      <th>Address</th>
      <th style="min-width: 120px">Address 2</th>
      <th>City</th>
      <th>State</th>
      <th style="min-width: 100px">Zip Code</th>
      <th>Education</th>
      <th style="min-width: 160px">Estimated Income</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @people.each do |person| %>
      <tr>
        <td><%= person.id %></td>
        <td><%= person.f_name.capitalize %></td>
        <td><%= person.m_name %></td>
        <td><%= capitalize(person.l_name) %></td>
        <td><%= capitalize(person.prefix) + '.' %></td>
        <td><%= capitalize(person.address1) %></td>
        <td><%= person.address2.capitalize %></td>
        <td><%= capitalize(person.city) %></td>
        <td><%= capitalize(person.state) %></td>
        <td><%= person.zipcode %></td>
        <td><%= capitalize(person.education) %></td>
        <td><%= person.estimated_income.downcase %></td>
        <td><%= link_to 'Show', person %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
<br>